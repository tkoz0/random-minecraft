#include <cassert>
#include <iostream>

#include "nbt.hpp"

#include "jrand.hpp"

int main(int argc, char **argv)
{
    (void)argc;
    (void)argv;
    const uint8_t data[3128] = {10,0,0,10,0,4,68,97,116,97,3,0,26,87,97,110,100,101,114,105,110,103,84,114,97,100,101,114,83,112,97,119,110,67,104,97,110,99,101,0,0,0,25,4,0,10,82,97,110,100,111,109,83,101,101,100,92,208,220,135,198,99,211,203,8,0,13,103,101,110,101,114,97,116,111,114,78,97,109,101,0,7,100,101,102,97,117,108,116,6,0,13,66,111,114,100,101,114,67,101,110,116,101,114,90,0,0,0,0,0,0,0,0,1,0,10,68,105,102,102,105,99,117,108,116,121,2,4,0,18,66,111,114,100,101,114,83,105,122,101,76,101,114,112,84,105,109,101,0,0,0,0,0,0,0,0,1,0,7,114,97,105,110,105,110,103,0,10,0,13,68,105,109,101,110,115,105,111,110,68,97,116,97,10,0,1,49,10,0,11,68,114,97,103,111,110,70,105,103,104,116,9,0,8,71,97,116,101,119,97,121,115,3,0,0,0,20,0,0,0,14,0,0,0,15,0,0,0,7,0,0,0,3,0,0,0,13,0,0,0,8,0,0,0,9,0,0,0,11,0,0,0,6,0,0,0,4,0,0,0,12,0,0,0,2,0,0,0,17,0,0,0,19,0,0,0,0,0,0,0,10,0,0,0,16,0,0,0,1,0,0,0,5,0,0,0,18,1,0,12,68,114,97,103,111,110,75,105,108,108,101,100,1,1,0,16,80,114,101,118,105,111,117,115,108,121,75,105,108,108,101,100,1,0,0,0,4,0,4,84,105,109,101,0,0,0,0,0,0,2,98,3,0,8,71,97,109,101,84,121,112,101,0,0,0,1,9,0,12,83,101,114,118,101,114,66,114,97,110,100,115,8,0,0,0,1,0,7,118,97,110,105,108,108,97,1,0,11,77,97,112,70,101,97,116,117,114,101,115,1,6,0,13,66,111,114,100,101,114,67,101,110,116,101,114,88,0,0,0,0,0,0,0,0,6,0,20,66,111,114,100,101,114,68,97,109,97,103,101,80,101,114,66,108,111,99,107,63,201,153,153,153,153,153,154,6,0,19,66,111,114,100,101,114,87,97,114,110,105,110,103,66,108,111,99,107,115,64,20,0,0,0,0,0,0,6,0,20,66,111,114,100,101,114,83,105,122,101,76,101,114,112,84,97,114,103,101,116,65,140,156,56,0,0,0,0,10,0,7,86,101,114,115,105,111,110,1,0,8,83,110,97,112,115,104,111,116,0,3,0,2,73,100,0,0,8,182,8,0,4,78,97,109,101,0,6,49,46,49,53,46,50,0,4,0,7,68,97,121,84,105,109,101,0,0,0,0,0,0,2,98,1,0,11,105,110,105,116,105,97,108,105,122,101,100,1,1,0,9,87,97,115,77,111,100,100,101,100,0,1,0,13,97,108,108,111,119,67,111,109,109,97,110,100,115,1,4,0,10,83,105,122,101,79,110,68,105,115,107,0,0,0,0,0,0,0,0,3,0,25,87,97,110,100,101,114,105,110,103,84,114,97,100,101,114,83,112,97,119,110,68,101,108,97,121,0,0,93,192,10,0,16,67,117,115,116,111,109,66,111,115,115,69,118,101,110,116,115,0,10,0,9,71,97,109,101,82,117,108,101,115,8,0,10,100,111,70,105,114,101,84,105,99,107,0,4,116,114,117,101,8,0,21,109,97,120,67,111,109,109,97,110,100,67,104,97,105,110,76,101,110,103,116,104,0,5,54,53,53,51,54,8,0,10,102,105,114,101,68,97,109,97,103,101,0,4,116,114,117,101,8,0,16,114,101,100,117,99,101,100,68,101,98,117,103,73,110,102,111,0,5,102,97,108,115,101,8,0,26,100,105,115,97,98,108,101,69,108,121,116,114,97,77,111,118,101,109,101,110,116,67,104,101,99,107,0,5,102,97,108,115,101,8,0,20,97,110,110,111,117,110,99,101,65,100,118,97,110,99,101,109,101,110,116,115,0,4,116,114,117,101,8,0,14,100,114,111,119,110,105,110,103,68,97,109,97,103,101,0,4,116,114,117,101,8,0,18,99,111,109,109,97,110,100,66,108,111,99,107,79,117,116,112,117,116,0,4,116,114,117,101,8,0,13,100,111,77,111,98,83,112,97,119,110,105,110,103,0,4,116,114,117,101,8,0,17,109,97,120,69,110,116,105,116,121,67,114,97,109,109,105,110,103,0,2,50,52,8,0,12,100,105,115,97,98,108,101,82,97,105,100,115,0,5,102,97,108,115,101,8,0,14,100,111,87,101,97,116,104,101,114,67,121,99,108,101,0,4,116,114,117,101,8,0,15,100,111,68,97,121,108,105,103,104,116,67,121,99,108,101,0,4,116,114,117,101,8,0,17,115,104,111,119,68,101,97,116,104,77,101,115,115,97,103,101,115,0,4,116,114,117,101,8,0,11,100,111,84,105,108,101,68,114,111,112,115,0,4,116,114,117,101,8,0,10,100,111,73,110,115,111,109,110,105,97,0,4,116,114,117,101,8,0,18,100,111,73,109,109,101,100,105,97,116,101,82,101,115,112,97,119,110,0,5,102,97,108,115,101,8,0,19,110,97,116,117,114,97,108,82,101,103,101,110,101,114,97,116,105,111,110,0,4,116,114,117,101,8,0,9,100,111,77,111,98,76,111,111,116,0,4,116,114,117,101,8,0,10,102,97,108,108,68,97,109,97,103,101,0,4,116,114,117,101,8,0,13,107,101,101,112,73,110,118,101,110,116,111,114,121,0,5,102,97,108,115,101,8,0,13,100,111,69,110,116,105,116,121,68,114,111,112,115,0,4,116,114,117,101,8,0,17,100,111,76,105,109,105,116,101,100,67,114,97,102,116,105,110,103,0,5,102,97,108,115,101,8,0,11,109,111,98,71,114,105,101,102,105,110,103,0,4,116,114,117,101,8,0,15,114,97,110,100,111,109,84,105,99,107,83,112,101,101,100,0,1,51,8,0,11,115,112,97,119,110,82,97,100,105,117,115,0,2,49,48,8,0,16,100,111,84,114,97,100,101,114,83,112,97,119,110,105,110,103,0,4,116,114,117,101,8,0,16,108,111,103,65,100,109,105,110,67,111,109,109,97,110,100,115,0,4,116,114,117,101,8,0,24,115,112,101,99,116,97,116,111,114,115,71,101,110,101,114,97,116,101,67,104,117,110,107,115,0,4,116,114,117,101,8,0,19,115,101,110,100,67,111,109,109,97,110,100,70,101,101,100,98,97,99,107,0,4,116,114,117,101,8,0,16,100,111,80,97,116,114,111,108,83,112,97,119,110,105,110,103,0,4,116,114,117,101,0,10,0,6,80,108,97,121,101,114,10,0,5,66,114,97,105,110,10,0,8,109,101,109,111,114,105,101,115,0,0,3,0,15,72,117,114,116,66,121,84,105,109,101,115,116,97,109,112,0,0,0,0,2,0,10,83,108,101,101,112,84,105,109,101,114,0,0,9,0,10,65,116,116,114,105,98,117,116,101,115,10,0,0,0,8,6,0,4,66,97,115,101,64,52,0,0,0,0,0,0,8,0,4,78,97,109,101,0,17,103,101,110,101,114,105,99,46,109,97,120,72,101,97,108,116,104,0,6,0,4,66,97,115,101,0,0,0,0,0,0,0,0,8,0,4,78,97,109,101,0,27,103,101,110,101,114,105,99,46,107,110,111,99,107,98,97,99,107,82,101,115,105,115,116,97,110,99,101,0,6,0,4,66,97,115,101,63,185,153,153,160,0,0,0,8,0,4,78,97,109,101,0,21,103,101,110,101,114,105,99,46,109,111,118,101,109,101,110,116,83,112,101,101,100,0,6,0,4,66,97,115,101,0,0,0,0,0,0,0,0,8,0,4,78,97,109,101,0,13,103,101,110,101,114,105,99,46,97,114,109,111,114,0,6,0,4,66,97,115,101,0,0,0,0,0,0,0,0,8,0,4,78,97,109,101,0,22,103,101,110,101,114,105,99,46,97,114,109,111,114,84,111,117,103,104,110,101,115,115,0,6,0,4,66,97,115,101,63,240,0,0,0,0,0,0,8,0,4,78,97,109,101,0,20,103,101,110,101,114,105,99,46,97,116,116,97,99,107,68,97,109,97,103,101,0,6,0,4,66,97,115,101,64,16,0,0,0,0,0,0,8,0,4,78,97,109,101,0,19,103,101,110,101,114,105,99,46,97,116,116,97,99,107,83,112,101,101,100,0,6,0,4,66,97,115,101,0,0,0,0,0,0,0,0,8,0,4,78,97,109,101,0,12,103,101,110,101,114,105,99,46,108,117,99,107,0,1,0,12,73,110,118,117,108,110,101,114,97,98,108,101,0,1,0,10,70,97,108,108,70,108,121,105,110,103,0,3,0,14,80,111,114,116,97,108,67,111,111,108,100,111,119,110,0,0,0,0,5,0,16,65,98,115,111,114,112,116,105,111,110,65,109,111,117,110,116,0,0,0,0,10,0,9,97,98,105,108,105,116,105,101,115,1,0,12,105,110,118,117,108,110,101,114,97,98,108,101,1,1,0,6,109,97,121,102,108,121,1,1,0,10,105,110,115,116,97,98,117,105,108,100,1,5,0,9,119,97,108,107,83,112,101,101,100,61,204,204,205,1,0,8,109,97,121,66,117,105,108,100,1,1,0,6,102,108,121,105,110,103,0,5,0,8,102,108,121,83,112,101,101,100,61,76,204,205,0,5,0,12,70,97,108,108,68,105,115,116,97,110,99,101,0,0,0,0,10,0,10,114,101,99,105,112,101,66,111,111,107,9,0,7,114,101,99,105,112,101,115,0,0,0,0,0,1,0,20,105,115,70,105,108,116,101,114,105,110,103,67,114,97,102,116,97,98,108,101,0,9,0,13,116,111,66,101,68,105,115,112,108,97,121,101,100,0,0,0,0,0,1,0,16,105,115,70,117,114,110,97,99,101,71,117,105,79,112,101,110,0,1,0,9,105,115,71,117,105,79,112,101,110,0,1,0,27,105,115,70,117,114,110,97,99,101,70,105,108,116,101,114,105,110,103,67,114,97,102,116,97,98,108,101,0,0,2,0,9,68,101,97,116,104,84,105,109,101,0,0,3,0,6,88,112,83,101,101,100,0,0,0,0,3,0,7,88,112,84,111,116,97,108,0,0,0,0,3,0,14,112,108,97,121,101,114,71,97,109,101,84,121,112,101,0,0,0,1,1,0,11,115,101,101,110,67,114,101,100,105,116,115,0,9,0,6,77,111,116,105,111,110,6,0,0,0,3,0,0,0,0,0,0,0,0,191,180,18,5,194,143,92,41,0,0,0,0,0,0,0,0,4,0,9,85,85,73,68,76,101,97,115,116,151,152,249,60,216,222,92,133,5,0,6,72,101,97,108,116,104,65,160,0,0,5,0,19,102,111,111,100,83,97,116,117,114,97,116,105,111,110,76,101,118,101,108,64,160,0,0,2,0,3,65,105,114,1,44,1,0,8,79,110,71,114,111,117,110,100,1,3,0,9,68,105,109,101,110,115,105,111,110,0,0,0,0,9,0,8,82,111,116,97,116,105,111,110,5,0,0,0,2,194,227,241,121,63,111,39,74,3,0,7,88,112,76,101,118,101,108,0,0,0,0,3,0,5,83,99,111,114,101,0,0,0,0,4,0,8,85,85,73,68,77,111,115,116,148,229,69,85,236,232,67,123,9,0,3,80,111,115,6,0,0,0,3,192,111,112,0,0,0,0,0,64,82,64,0,0,0,0,0,192,85,32,0,0,0,0,0,2,0,4,70,105,114,101,255,236,5,0,3,88,112,80,0,0,0,0,9,0,10,69,110,100,101,114,73,116,101,109,115,0,0,0,0,0,3,0,11,68,97,116,97,86,101,114,115,105,111,110,0,0,8,182,3,0,9,102,111,111,100,76,101,118,101,108,0,0,0,20,5,0,19,102,111,111,100,69,120,104,97,117,115,116,105,111,110,76,101,118,101,108,0,0,0,0,2,0,8,72,117,114,116,84,105,109,101,0,0,3,0,16,83,101,108,101,99,116,101,100,73,116,101,109,83,108,111,116,0,0,0,0,9,0,9,73,110,118,101,110,116,111,114,121,0,0,0,0,0,3,0,13,102,111,111,100,84,105,99,107,84,105,109,101,114,0,0,0,0,0,3,0,6,83,112,97,119,110,89,0,0,0,72,3,0,8,114,97,105,110,84,105,109,101,0,1,166,22,3,0,11,116,104,117,110,100,101,114,84,105,109,101,0,0,114,253,3,0,6,83,112,97,119,110,90,255,255,255,161,1,0,8,104,97,114,100,99,111,114,101,0,1,0,16,68,105,102,102,105,99,117,108,116,121,76,111,99,107,101,100,0,3,0,6,83,112,97,119,110,88,255,255,255,0,3,0,16,99,108,101,97,114,87,101,97,116,104,101,114,84,105,109,101,0,0,0,0,1,0,10,116,104,117,110,100,101,114,105,110,103,0,3,0,16,103,101,110,101,114,97,116,111,114,86,101,114,115,105,111,110,0,0,0,1,3,0,7,118,101,114,115,105,111,110,0,0,74,189,6,0,14,66,111,114,100,101,114,83,97,102,101,90,111,110,101,64,20,0,0,0,0,0,0,4,0,10,76,97,115,116,80,108,97,121,101,100,0,0,1,113,85,174,237,246,6,0,17,66,111,114,100,101,114,87,97,114,110,105,110,103,84,105,109,101,64,46,0,0,0,0,0,0,9,0,15,83,99,104,101,100,117,108,101,100,69,118,101,110,116,115,0,0,0,0,0,8,0,9,76,101,118,101,108,78,97,109,101,0,15,116,101,115,116,52,95,111,118,101,114,119,111,114,108,100,6,0,10,66,111,114,100,101,114,83,105,122,101,65,140,156,56,0,0,0,0,3,0,11,68,97,116,97,86,101,114,115,105,111,110,0,0,8,182,10,0,9,68,97,116,97,80,97,99,107,115,9,0,7,69,110,97,98,108,101,100,8,0,0,0,1,0,7,118,97,110,105,108,108,97,9,0,8,68,105,115,97,98,108,101,100,0,0,0,0,0,0,0,0};
    mclib::TAG *tag = mclib::TAG::decode((char*)data,3128);
    std::cout << tag->printTag() << std::endl;
    std::cout << tag->nbtSize() << std::endl;
    assert(tag->nbtSize() == 3128);
    uint8_t data2[3128];
    tag->writeNbt((char*)data2);
    for (size_t i = 0; i < 3128; ++i)
    {
        std::cout << "byte " << i << " = " << (uint32_t)data2[i];
        if (data[i] == data2[i])
            std::cout << " (correct)" << std::endl;
        else
        {
            std::cout << " (incorrect, should be " << (uint32_t)data[i] << ")" << std::endl;
            return 1;
        }
    }
    delete tag;
    return 0;
}
